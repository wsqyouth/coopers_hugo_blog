<!DOCTYPE html>
<html lang="en" dir="auto">

<<<<<<< HEAD
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
=======
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=60062&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
>>>>>>> 55809d5 (base hugo build coopers blog)
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>React 19 æ–°ç‰¹æ€§æ·±åº¦è§£æ | Cooper&#39;s Blog</title>
<meta name="keywords" content="React, React 19, å‰ç«¯å¼€å‘">
<meta name="description" content="å…¨é¢è§£æ React 19 çš„æ–°ç‰¹æ€§ï¼ŒåŒ…æ‹¬ Actionsã€use Hookã€æœåŠ¡å™¨ç»„ä»¶ç­‰é‡è¦æ›´æ–°ã€‚">
<meta name="author" content="Cooper">
<<<<<<< HEAD
<link rel="canonical" href="http://localhost:1313/1/01/01/react-19-%E6%96%B0%E7%89%B9%E6%80%A7%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3a03b24dcf4f9157cfd4aadabdb9b507d3b072faa70e28f7f74818e75e0f30d0.css" integrity="sha256-OgOyTc9PkVfP1Kravbm1B9OwcvqnDij390gY514PMNA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/img/Q.gif">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/img/Q.gif">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/img/Q.gif">
<link rel="apple-touch-icon" href="http://localhost:1313/Q.gif">
<link rel="mask-icon" href="http://localhost:1313/Q.gif">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/1/01/01/react-19-%E6%96%B0%E7%89%B9%E6%80%A7%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/">
=======
<link rel="canonical" href="http://localhost:60062/1/01/01/react-19-%E6%96%B0%E7%89%B9%E6%80%A7%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3a03b24dcf4f9157cfd4aadabdb9b507d3b072faa70e28f7f74818e75e0f30d0.css" integrity="sha256-OgOyTc9PkVfP1Kravbm1B9OwcvqnDij390gY514PMNA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:60062/img/Q.gif">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:60062/img/Q.gif">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:60062/img/Q.gif">
<link rel="apple-touch-icon" href="http://localhost:60062/Q.gif">
<link rel="mask-icon" href="http://localhost:60062/Q.gif">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:60062/1/01/01/react-19-%E6%96%B0%E7%89%B9%E6%80%A7%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/">
>>>>>>> 55809d5 (base hugo build coopers blog)
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">



<link rel="stylesheet" href="/assets/css/shortcode.min.56cb41cd6a71c3c7dc58d21c9aebe0a4e9d7be9ddff6e7e8edd1c9869af7ce6f.css" integrity="sha256-VstBzWpxw8fcWNIcmuvgpOnXvp3f9ufo7dHJhpr3zm8=" crossorigin="anonymous">
<<<<<<< HEAD
<meta property="og:url" content="http://localhost:1313/1/01/01/react-19-%E6%96%B0%E7%89%B9%E6%80%A7%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/">
=======
<meta property="og:url" content="http://localhost:60062/1/01/01/react-19-%E6%96%B0%E7%89%B9%E6%80%A7%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/">
>>>>>>> 55809d5 (base hugo build coopers blog)
  <meta property="og:site_name" content="Cooper&#39;s Blog">
  <meta property="og:title" content="React 19 æ–°ç‰¹æ€§æ·±åº¦è§£æ">
  <meta property="og:description" content="å…¨é¢è§£æ React 19 çš„æ–°ç‰¹æ€§ï¼ŒåŒ…æ‹¬ Actionsã€use Hookã€æœåŠ¡å™¨ç»„ä»¶ç­‰é‡è¦æ›´æ–°ã€‚">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:tag" content="React">
    <meta property="article:tag" content="React 19">
    <meta property="article:tag" content="å‰ç«¯å¼€å‘">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="React 19 æ–°ç‰¹æ€§æ·±åº¦è§£æ">
<meta name="twitter:description" content="å…¨é¢è§£æ React 19 çš„æ–°ç‰¹æ€§ï¼ŒåŒ…æ‹¬ Actionsã€use Hookã€æœåŠ¡å™¨ç»„ä»¶ç­‰é‡è¦æ›´æ–°ã€‚">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
<<<<<<< HEAD
      "item": "http://localhost:1313/posts/"
=======
      "item": "http://localhost:60062/posts/"
>>>>>>> 55809d5 (base hugo build coopers blog)
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "React 19 æ–°ç‰¹æ€§æ·±åº¦è§£æ",
<<<<<<< HEAD
      "item": "http://localhost:1313/1/01/01/react-19-%E6%96%B0%E7%89%B9%E6%80%A7%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/"
=======
      "item": "http://localhost:60062/1/01/01/react-19-%E6%96%B0%E7%89%B9%E6%80%A7%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/"
>>>>>>> 55809d5 (base hugo build coopers blog)
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "React 19 æ–°ç‰¹æ€§æ·±åº¦è§£æ",
  "name": "React 19 æ–°ç‰¹æ€§æ·±åº¦è§£æ",
  "description": "å…¨é¢è§£æ React 19 çš„æ–°ç‰¹æ€§ï¼ŒåŒ…æ‹¬ Actionsã€use Hookã€æœåŠ¡å™¨ç»„ä»¶ç­‰é‡è¦æ›´æ–°ã€‚",
  "keywords": [
    "React", "React 19", "å‰ç«¯å¼€å‘"
  ],
  "articleBody": "React 19 æ–°ç‰¹æ€§æ·±åº¦è§£æ React 19 å¸¦æ¥äº†è®¸å¤šæ¿€åŠ¨äººå¿ƒçš„æ–°ç‰¹æ€§ï¼Œè¿™äº›æ›´æ–°æ—¨åœ¨æå‡å¼€å‘ä½“éªŒã€ç®€åŒ–çŠ¶æ€ç®¡ç†ï¼Œå¹¶ä¸ºæœªæ¥çš„ React åº”ç”¨å¥ å®šåŸºç¡€ã€‚\n1. Actions - ç®€åŒ–å¼‚æ­¥çŠ¶æ€ç®¡ç† ä»€ä¹ˆæ˜¯ Actionsï¼Ÿ Actions æ˜¯ React 19 ä¸­å¤„ç†å¼‚æ­¥æ“ä½œçš„æ–°æ–¹å¼ï¼Œå®ƒè‡ªåŠ¨ç®¡ç†æŒ‚èµ·çŠ¶æ€ã€é”™è¯¯å¤„ç†å’Œè¡¨å•æäº¤ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import { useActionState } from 'react' function UpdateName() { const [error, submitAction, isPending] = useActionState( async (previousState, formData) =\u003e { const error = await updateName(formData.get(\"name\")) if (error) { return error } redirect(\"/profile\") }, null, ) return ( \u003cform action={submitAction}\u003e \u003cinput type=\"text\" name=\"name\" /\u003e \u003cbutton type=\"submit\" disabled={isPending}\u003e {isPending ? \"æ›´æ–°ä¸­...\" : \"æ›´æ–°\"} \u003c/button\u003e {error \u0026\u0026 \u003cp\u003e{error}\u003c/p\u003e} \u003c/form\u003e ) } useOptimistic Hook ä¹è§‚æ›´æ–°è®© UI æ›´åŠ å“åº”ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 import { useOptimistic } from 'react' function ChangeName({ currentName, onUpdateName }) { const [optimisticName, setOptimisticName] = useOptimistic(currentName) const submitAction = async formData =\u003e { const newName = formData.get(\"name\") setOptimisticName(newName) const updatedName = await onUpdateName(newName) // å®é™…ç»“æœä¼šè‡ªåŠ¨æ›¿æ¢ä¹è§‚å€¼ } return ( \u003cform action={submitAction}\u003e \u003cp\u003eä½ çš„åå­—: {optimisticName}\u003c/p\u003e \u003cinput type=\"text\" name=\"name\" /\u003e \u003c/form\u003e ) } 2. use Hook - ç»Ÿä¸€èµ„æºè®¿é—® è¯»å– Promise 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import { use } from 'react' function Comments({ commentsPromise }) { // use ä¼šæš‚åœç»„ä»¶ç›´åˆ° Promise è§£å†³ const comments = use(commentsPromise) return ( \u003cdiv\u003e {comments.map(comment =\u003e ( \u003cdiv key={comment.id}\u003e{comment.text}\u003c/div\u003e ))} \u003c/div\u003e ) } function App() { const commentsPromise = fetchComments() return ( \u003cSuspense fallback={\u003cdiv\u003eåŠ è½½è¯„è®ºä¸­...\u003c/div\u003e}\u003e \u003cComments commentsPromise={commentsPromise} /\u003e \u003c/Suspense\u003e ) } è¯»å– Context 1 2 3 4 5 6 7 8 9 10 11 12 13 import { use, createContext } from 'react' const ThemeContext = createContext(null) function Button() { // use å¯ä»¥åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ï¼Œçªç ´äº† Hook è§„åˆ™é™åˆ¶ let theme if (someCondition) { theme = use(ThemeContext) } return \u003cbutton className={theme}\u003eClick me\u003c/button\u003e } 3. æœåŠ¡å™¨ç»„ä»¶å¢å¼º æœåŠ¡å™¨ Actions åœ¨æœåŠ¡å™¨ç»„ä»¶ä¸­ç›´æ¥è°ƒç”¨æœåŠ¡å™¨å‡½æ•°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // app/posts/actions.ts 'use server' export async function createPost(formData: FormData) { const title = formData.get('title') const content = formData.get('content') // ç›´æ¥åœ¨æœåŠ¡å™¨ç«¯æ“ä½œæ•°æ®åº“ await db.post.create({ data: { title, content } }) revalidatePath('/posts') redirect('/posts') } 1 2 3 4 5 6 7 8 9 10 11 12 // app/posts/new/page.tsx import { createPost } from '../actions' export default function NewPost() { return ( \u003cform action={createPost}\u003e \u003cinput name=\"title\" placeholder=\"æ ‡é¢˜\" /\u003e \u003ctextarea name=\"content\" placeholder=\"å†…å®¹\" /\u003e \u003cbutton type=\"submit\"\u003eå‘å¸ƒ\u003c/button\u003e \u003c/form\u003e ) } æ”¹è¿›çš„ Suspense 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 function PostsList() { return ( \u003cSuspense fallback={\u003cPostsSkeleton /\u003e}\u003e \u003cPosts /\u003e \u003c/Suspense\u003e ) } // Posts ç»„ä»¶å¯ä»¥ç›´æ¥æ˜¯å¼‚æ­¥çš„ async function Posts() { const posts = await fetchPosts() return ( \u003cdiv\u003e {posts.map(post =\u003e ( \u003cPostCard key={post.id} post={post} /\u003e ))} \u003c/div\u003e ) } 4. è¡¨å•å¤„ç†æ”¹è¿› åŸç”Ÿè¡¨å•é›†æˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 function SearchForm() { async function search(formData) { 'use server' const query = formData.get('query') // æ‰§è¡Œæœç´¢é€»è¾‘ } return ( \u003cform action={search}\u003e \u003cinput name=\"query\" type=\"search\" /\u003e \u003cbutton type=\"submit\"\u003eæœç´¢\u003c/button\u003e \u003c/form\u003e ) } è¡¨å•çŠ¶æ€è‡ªåŠ¨ç®¡ç† 1 2 3 4 5 6 7 8 9 10 11 import { useFormStatus } from 'react-dom' function SubmitButton() { const { pending } = useFormStatus() return ( \u003cbutton type=\"submit\" disabled={pending}\u003e {pending ? 'æäº¤ä¸­...' : 'æäº¤'} \u003c/button\u003e ) } 5. Ref ä½œä¸º Prop ç°åœ¨å¯ä»¥å°† ref ä½œä¸ºå¸¸è§„ prop ä¼ é€’ï¼š\n1 2 3 4 5 6 7 8 9 10 function MyInput({ placeholder, ref }) { return \u003cinput placeholder={placeholder} ref={ref} /\u003e } // ä½¿ç”¨æ—¶ function Form() { const inputRef = useRef(null) return \u003cMyInput placeholder=\"è¾“å…¥æ–‡æœ¬\" ref={inputRef} /\u003e } 6. æ”¹è¿›çš„ Hydration Selective Hydration React 19 æ”¹è¿›äº†é€‰æ‹©æ€§æ°´åˆï¼Œä¼˜å…ˆå¤„ç†ç”¨æˆ·äº¤äº’çš„ç»„ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 function App() { return ( \u003cdiv\u003e \u003cHeader /\u003e \u003cSuspense fallback={\u003cSidebarSkeleton /\u003e}\u003e \u003cSidebar /\u003e \u003c/Suspense\u003e \u003cSuspense fallback={\u003cPostSkeleton /\u003e}\u003e \u003cMainContent /\u003e \u003c/Suspense\u003e \u003c/div\u003e ) } 7. å…ƒæ•°æ®æ”¯æŒ å†…ç½®æ–‡æ¡£å…ƒæ•°æ® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 function BlogPost({ post }) { return ( \u003c\u003e \u003ctitle\u003e{post.title}\u003c/title\u003e \u003cmeta name=\"description\" content={post.excerpt} /\u003e \u003cmeta property=\"og:title\" content={post.title} /\u003e \u003cmeta property=\"og:description\" content={post.excerpt} /\u003e \u003carticle\u003e \u003ch1\u003e{post.title}\u003c/h1\u003e \u003cp\u003e{post.content}\u003c/p\u003e \u003c/article\u003e \u003c/\u003e ) } 8. é”™è¯¯è¾¹ç•Œæ”¹è¿› æ›´å¥½çš„é”™è¯¯ä¿¡æ¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 function ErrorBoundary({ children }) { return ( \u003cSuspense fallback={\u003cLoading /\u003e} errorBoundary={({ error, retry }) =\u003e ( \u003cdiv\u003e \u003ch2\u003eå‡ºé”™äº†\u003c/h2\u003e \u003cdetails\u003e{error.message}\u003c/details\u003e \u003cbutton onClick={retry}\u003eé‡è¯•\u003c/button\u003e \u003c/div\u003e )} \u003e {children} \u003c/Suspense\u003e ) } 9. æ€§èƒ½ä¼˜åŒ– è‡ªåŠ¨æ‰¹å¤„ç† React 19 è‡ªåŠ¨æ‰¹å¤„ç†æ‰€æœ‰çŠ¶æ€æ›´æ–°ï¼Œä¸ä»…é™äºäº‹ä»¶å¤„ç†å™¨ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 function fetchData() { // è¿™äº›çŠ¶æ€æ›´æ–°ä¼šè‡ªåŠ¨æ‰¹å¤„ç† setLoading(true) setError(null) setData(null) fetch('/api/data') .then(response =\u003e response.json()) .then(data =\u003e { // è¿™äº›ä¹Ÿä¼šæ‰¹å¤„ç† setLoading(false) setData(data) }) } Compiler ä¼˜åŒ– React 19 åŒ…å«äº†æ–°çš„ç¼–è¯‘å™¨ï¼Œè‡ªåŠ¨ä¼˜åŒ–ç»„ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 // ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¼˜åŒ–è¿™ä¸ªç»„ä»¶ function ExpensiveComponent({ items, filter }) { const filteredItems = items.filter(item =\u003e item.category === filter ) return ( \u003cdiv\u003e {filteredItems.map(item =\u003e ( \u003cItem key={item.id} item={item} /\u003e ))} \u003c/div\u003e ) } 10. è¿ç§»æŒ‡å— ä» React 18 å‡çº§ æ›´æ–°ä¾èµ–ï¼š 1 npm install react@19 react-dom@19 ä»£ç ç°ä»£åŒ–ï¼š 1 2 3 4 5 6 7 // æ—§æ–¹å¼ const [data, setData] = useState(null) const [loading, setLoading] = useState(false) const [error, setError] = useState(null) // æ–°æ–¹å¼ const [data, error, loading] = useActionState(fetchData, null) åˆ©ç”¨æ–°ç‰¹æ€§ï¼š ä½¿ç”¨ Actions æ›¿ä»£å¤æ‚çš„çŠ¶æ€ç®¡ç† é‡‡ç”¨æœåŠ¡å™¨ç»„ä»¶æå‡æ€§èƒ½ åˆ©ç”¨ use Hook ç®€åŒ–å¼‚æ­¥æ“ä½œ æ€»ç»“ React 19 çš„è¿™äº›æ–°ç‰¹æ€§å¸¦æ¥äº†ï¼š\nğŸš€ æ›´ç®€å•çš„å¼‚æ­¥å¤„ç† - Actions å’Œ use Hook ğŸ“ æ›´å¥½çš„è¡¨å•ä½“éªŒ - åŸç”Ÿè¡¨å•é›†æˆå’ŒçŠ¶æ€ç®¡ç† âš¡ æ›´ä½³çš„æ€§èƒ½ - æ”¹è¿›çš„ Hydration å’Œç¼–è¯‘å™¨ä¼˜åŒ– ğŸ”§ æ›´å¼ºçš„æœåŠ¡å™¨ç«¯èƒ½åŠ› - å¢å¼ºçš„æœåŠ¡å™¨ç»„ä»¶ è¿™äº›æ›´æ–°è®© React åº”ç”¨å¼€å‘å˜å¾—æ›´åŠ ç›´è§‚å’Œé«˜æ•ˆï¼Œä¸ºæ„å»ºç°ä»£ Web åº”ç”¨æä¾›äº†å¼ºå¤§çš„å·¥å…·ã€‚\nğŸ”— ç›¸å…³é“¾æ¥: React 19 å®˜æ–¹æ–‡æ¡£ | å‡çº§æŒ‡å—\n",
  "wordCount" : "1721",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Cooper"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
<<<<<<< HEAD
    "@id": "http://localhost:1313/1/01/01/react-19-%E6%96%B0%E7%89%B9%E6%80%A7%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/"
=======
    "@id": "http://localhost:60062/1/01/01/react-19-%E6%96%B0%E7%89%B9%E6%80%A7%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/"
>>>>>>> 55809d5 (base hugo build coopers blog)
  },
  "publisher": {
    "@type": "Organization",
    "name": "Cooper's Blog",
    "logo": {
      "@type": "ImageObject",
<<<<<<< HEAD
      "url": "http://localhost:1313/img/Q.gif"
=======
      "url": "http://localhost:60062/img/Q.gif"
>>>>>>> 55809d5 (base hugo build coopers blog)
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
<<<<<<< HEAD
            <a href="http://localhost:1313/" accesskey="h" title="Cooper&#39;s Blog (Alt + H)">Cooper&#39;s Blog</a>
=======
            <a href="http://localhost:60062/" accesskey="h" title="Cooper&#39;s Blog (Alt + H)">Cooper&#39;s Blog</a>
>>>>>>> 55809d5 (base hugo build coopers blog)
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
<<<<<<< HEAD
                <a href="http://localhost:1313/" title="é¦–é¡µ">
=======
                <a href="http://localhost:60062/" title="é¦–é¡µ">
>>>>>>> 55809d5 (base hugo build coopers blog)
                    <span>é¦–é¡µ</span>
                </a>
            </li>
            <li>
<<<<<<< HEAD
                <a href="http://localhost:1313/archives/" title="å½’æ¡£">
=======
                <a href="http://localhost:60062/archives/" title="å½’æ¡£">
>>>>>>> 55809d5 (base hugo build coopers blog)
                    <span>å½’æ¡£</span>
                </a>
            </li>
            <li>
<<<<<<< HEAD
                <a href="http://localhost:1313/categories/" title="åˆ†ç±»">
=======
                <a href="http://localhost:60062/categories/" title="åˆ†ç±»">
>>>>>>> 55809d5 (base hugo build coopers blog)
                    <span>åˆ†ç±»</span>
                </a>
            </li>
            <li>
<<<<<<< HEAD
                <a href="http://localhost:1313/about/" title="å…³äº">
=======
                <a href="http://localhost:60062/about/" title="å…³äº">
>>>>>>> 55809d5 (base hugo build coopers blog)
                    <span>å…³äº</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">
<div class="main-container single-post-layout">
    <div class="single-content-wrapper">
<<<<<<< HEAD
        <a class="back-home-link" href="http://localhost:1313/">â€¹ è¿”å›é¦–é¡µ</a>
=======
        <a class="back-home-link" href="http://localhost:60062/">â€¹ è¿”å›é¦–é¡µ</a>
>>>>>>> 55809d5 (base hugo build coopers blog)

        <article class="post-single">
            <header class="post-header">
                <h1 class="post-title">React 19 æ–°ç‰¹æ€§æ·±åº¦è§£æ</h1>
                <div class="post-meta">
                    ğŸ•’ 0001å¹´01æœˆ01æ—¥ Â· 1721 å­—
<<<<<<< HEAD
                    Â· ğŸ“‚ <a href="http://localhost:1313/%20categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB">æŠ€æœ¯åˆ†äº«</a>
=======
                    Â· ğŸ“‚ <a href="http://localhost:60062/%20categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB">æŠ€æœ¯åˆ†äº«</a>
>>>>>>> 55809d5 (base hugo build coopers blog)
                </div>
            </header>

            <div class="post-content">
                <h1 id="react-19-æ–°ç‰¹æ€§æ·±åº¦è§£æ">React 19 æ–°ç‰¹æ€§æ·±åº¦è§£æ</h1>
<p>React 19 å¸¦æ¥äº†è®¸å¤šæ¿€åŠ¨äººå¿ƒçš„æ–°ç‰¹æ€§ï¼Œè¿™äº›æ›´æ–°æ—¨åœ¨æå‡å¼€å‘ä½“éªŒã€ç®€åŒ–çŠ¶æ€ç®¡ç†ï¼Œå¹¶ä¸ºæœªæ¥çš„ React åº”ç”¨å¥ å®šåŸºç¡€ã€‚</p>
<h2 id="1-actions---ç®€åŒ–å¼‚æ­¥çŠ¶æ€ç®¡ç†">1. Actions - ç®€åŒ–å¼‚æ­¥çŠ¶æ€ç®¡ç†</h2>
<h3 id="ä»€ä¹ˆæ˜¯-actions">ä»€ä¹ˆæ˜¯ Actionsï¼Ÿ</h3>
<p>Actions æ˜¯ React 19 ä¸­å¤„ç†å¼‚æ­¥æ“ä½œçš„æ–°æ–¹å¼ï¼Œå®ƒè‡ªåŠ¨ç®¡ç†æŒ‚èµ·çŠ¶æ€ã€é”™è¯¯å¤„ç†å’Œè¡¨å•æäº¤ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useActionState</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">UpdateName() {</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">error</span><span class="p">,</span> <span class="nx">submitAction</span><span class="p">,</span> <span class="nx">isPending</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useActionState</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="kr">async</span> <span class="p">(</span><span class="nx">previousState</span><span class="p">,</span> <span class="nx">formData</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">updateName</span><span class="p">(</span><span class="nx">formData</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">error</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="nx">redirect</span><span class="p">(</span><span class="s2">&#34;/profile&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="p">{</span><span class="nx">submitAction</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;name&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">isPending</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">isPending</span> <span class="o">?</span> <span class="s2">&#34;æ›´æ–°ä¸­...&#34;</span> <span class="o">:</span> <span class="s2">&#34;æ›´æ–°&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">error</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;{</span><span class="nx">error</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="useoptimistic-hook">useOptimistic Hook</h3>
<p>ä¹è§‚æ›´æ–°è®© UI æ›´åŠ å“åº”ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useOptimistic</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">ChangeName</span><span class="p">({</span> <span class="nx">currentName</span><span class="p">,</span> <span class="nx">onUpdateName</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">optimisticName</span><span class="p">,</span> <span class="nx">setOptimisticName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useOptimistic</span><span class="p">(</span><span class="nx">currentName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">submitAction</span> <span class="o">=</span> <span class="kr">async</span> <span class="nx">formData</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">newName</span> <span class="o">=</span> <span class="nx">formData</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setOptimisticName</span><span class="p">(</span><span class="nx">newName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">updatedName</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">onUpdateName</span><span class="p">(</span><span class="nx">newName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å®é™…ç»“æœä¼šè‡ªåŠ¨æ›¿æ¢ä¹è§‚å€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="p">{</span><span class="nx">submitAction</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="err">ä½ çš„åå­—</span><span class="o">:</span> <span class="p">{</span><span class="nx">optimisticName</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;name&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="2-use-hook---ç»Ÿä¸€èµ„æºè®¿é—®">2. use Hook - ç»Ÿä¸€èµ„æºè®¿é—®</h2>
<h3 id="è¯»å–-promise">è¯»å– Promise</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">use</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">Comments</span><span class="p">({</span> <span class="nx">commentsPromise</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// use ä¼šæš‚åœç»„ä»¶ç›´åˆ° Promise è§£å†³
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">comments</span> <span class="o">=</span> <span class="nx">use</span><span class="p">(</span><span class="nx">commentsPromise</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">comments</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">comment</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">comment</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;{</span><span class="nx">comment</span><span class="p">.</span><span class="nx">text</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">))}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">App() {</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">commentsPromise</span> <span class="o">=</span> <span class="nx">fetchComments</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">Suspense</span> <span class="na">fallback</span><span class="o">=</span><span class="p">{&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="err">åŠ è½½è¯„è®ºä¸­</span><span class="p">...&lt;/</span><span class="nt">div</span><span class="p">&gt;}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Comments</span> <span class="na">commentsPromise</span><span class="o">=</span><span class="p">{</span><span class="nx">commentsPromise</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">Suspense</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è¯»å–-context">è¯»å– Context</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">use</span><span class="p">,</span> <span class="nx">createContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">ThemeContext</span> <span class="o">=</span> <span class="nx">createContext</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">Button() {</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// use å¯ä»¥åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ï¼Œçªç ´äº† Hook è§„åˆ™é™åˆ¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">theme</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">someCondition</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">theme</span> <span class="o">=</span> <span class="nx">use</span><span class="p">(</span><span class="nx">ThemeContext</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">theme</span><span class="p">}&gt;</span><span class="nx">Click</span> <span class="nx">me</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3-æœåŠ¡å™¨ç»„ä»¶å¢å¼º">3. æœåŠ¡å™¨ç»„ä»¶å¢å¼º</h2>
<h3 id="æœåŠ¡å™¨-actions">æœåŠ¡å™¨ Actions</h3>
<p>åœ¨æœåŠ¡å™¨ç»„ä»¶ä¸­ç›´æ¥è°ƒç”¨æœåŠ¡å™¨å‡½æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="c1">// app/posts/actions.ts
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="s1">&#39;use server&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">async</span> <span class="kd">function</span> <span class="nx">createPost</span><span class="p">(</span><span class="nx">formData</span>: <span class="kt">FormData</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">formData</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">formData</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1">// ç›´æ¥åœ¨æœåŠ¡å™¨ç«¯æ“ä½œæ•°æ®åº“
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="p">{</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">content</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="nx">revalidatePath</span><span class="p">(</span><span class="s1">&#39;/posts&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/posts&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="c1">// app/posts/new/page.tsx
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">createPost</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../actions&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">NewPost() {</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="p">{</span><span class="nx">createPost</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;title&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;æ ‡é¢˜&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">textarea</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;content&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;å†…å®¹&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span><span class="p">&gt;</span><span class="err">å‘å¸ƒ</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ”¹è¿›çš„-suspense">æ”¹è¿›çš„ Suspense</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">PostsList() {</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">Suspense</span> <span class="na">fallback</span><span class="o">=</span><span class="p">{&lt;</span><span class="nt">PostsSkeleton</span> <span class="p">/&gt;}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Posts</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">Suspense</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Posts ç»„ä»¶å¯ä»¥ç›´æ¥æ˜¯å¼‚æ­¥çš„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">async</span> <span class="kd">function</span> <span class="nx">Posts() {</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">posts</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchPosts</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">posts</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">post</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">PostCard</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">post</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="na">post</span><span class="o">=</span><span class="p">{</span><span class="nx">post</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">))}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="4-è¡¨å•å¤„ç†æ”¹è¿›">4. è¡¨å•å¤„ç†æ”¹è¿›</h2>
<h3 id="åŸç”Ÿè¡¨å•é›†æˆ">åŸç”Ÿè¡¨å•é›†æˆ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">SearchForm() {</span>
</span></span><span class="line"><span class="cl">  <span class="kr">async</span> <span class="kd">function</span> <span class="nx">search</span><span class="p">(</span><span class="nx">formData</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;use server&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">formData</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="s1">&#39;query&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ‰§è¡Œæœç´¢é€»è¾‘
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="p">{</span><span class="nx">search</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;query&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;search&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span><span class="p">&gt;</span><span class="err">æœç´¢</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è¡¨å•çŠ¶æ€è‡ªåŠ¨ç®¡ç†">è¡¨å•çŠ¶æ€è‡ªåŠ¨ç®¡ç†</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useFormStatus</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react-dom&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">SubmitButton() {</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">pending</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useFormStatus</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">pending</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">pending</span> <span class="o">?</span> <span class="s1">&#39;æäº¤ä¸­...&#39;</span> <span class="o">:</span> <span class="s1">&#39;æäº¤&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="5-ref-ä½œä¸º-prop">5. Ref ä½œä¸º Prop</h2>
<p>ç°åœ¨å¯ä»¥å°† ref ä½œä¸ºå¸¸è§„ prop ä¼ é€’ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">MyInput</span><span class="p">({</span> <span class="nx">placeholder</span><span class="p">,</span> <span class="nx">ref</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">input</span> <span class="na">placeholder</span><span class="o">=</span><span class="p">{</span><span class="nx">placeholder</span><span class="p">}</span> <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">ref</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ä½¿ç”¨æ—¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">function</span> <span class="nx">Form() {</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">inputRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">MyInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;è¾“å…¥æ–‡æœ¬&#34;</span> <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">inputRef</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="6-æ”¹è¿›çš„-hydration">6. æ”¹è¿›çš„ Hydration</h2>
<h3 id="selective-hydration">Selective Hydration</h3>
<p>React 19 æ”¹è¿›äº†é€‰æ‹©æ€§æ°´åˆï¼Œä¼˜å…ˆå¤„ç†ç”¨æˆ·äº¤äº’çš„ç»„ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">App() {</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Header</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Suspense</span> <span class="na">fallback</span><span class="o">=</span><span class="p">{&lt;</span><span class="nt">SidebarSkeleton</span> <span class="p">/&gt;}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Sidebar</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Suspense</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Suspense</span> <span class="na">fallback</span><span class="o">=</span><span class="p">{&lt;</span><span class="nt">PostSkeleton</span> <span class="p">/&gt;}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">MainContent</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Suspense</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="7-å…ƒæ•°æ®æ”¯æŒ">7. å…ƒæ•°æ®æ”¯æŒ</h2>
<h3 id="å†…ç½®æ–‡æ¡£å…ƒæ•°æ®">å†…ç½®æ–‡æ¡£å…ƒæ•°æ®</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">BlogPost</span><span class="p">({</span> <span class="nx">post</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;{</span><span class="nx">post</span><span class="p">.</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span> <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="nx">post</span><span class="p">.</span><span class="nx">excerpt</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:title&#34;</span> <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="nx">post</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:description&#34;</span> <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="nx">post</span><span class="p">.</span><span class="nx">excerpt</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">article</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;{</span><span class="nx">post</span><span class="p">.</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;{</span><span class="nx">post</span><span class="p">.</span><span class="nx">content</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="8-é”™è¯¯è¾¹ç•Œæ”¹è¿›">8. é”™è¯¯è¾¹ç•Œæ”¹è¿›</h2>
<h3 id="æ›´å¥½çš„é”™è¯¯ä¿¡æ¯">æ›´å¥½çš„é”™è¯¯ä¿¡æ¯</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">ErrorBoundary</span><span class="p">({</span> <span class="nx">children</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">Suspense</span> 
</span></span><span class="line"><span class="cl">      <span class="na">fallback</span><span class="o">=</span><span class="p">{&lt;</span><span class="nt">Loading</span> <span class="p">/&gt;}</span>
</span></span><span class="line"><span class="cl">      <span class="na">errorBoundary</span><span class="o">=</span><span class="p">{({</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">retry</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="err">å‡ºé”™äº†</span><span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">details</span><span class="p">&gt;{</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">}&lt;/</span><span class="nt">details</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">retry</span><span class="p">}&gt;</span><span class="err">é‡è¯•</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">)}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">Suspense</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="9-æ€§èƒ½ä¼˜åŒ–">9. æ€§èƒ½ä¼˜åŒ–</h2>
<h3 id="è‡ªåŠ¨æ‰¹å¤„ç†">è‡ªåŠ¨æ‰¹å¤„ç†</h3>
<p>React 19 è‡ªåŠ¨æ‰¹å¤„ç†æ‰€æœ‰çŠ¶æ€æ›´æ–°ï¼Œä¸ä»…é™äºäº‹ä»¶å¤„ç†å™¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">fetchData() {</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è¿™äº›çŠ¶æ€æ›´æ–°ä¼šè‡ªåŠ¨æ‰¹å¤„ç†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">setLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">setError</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">setData</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/data&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// è¿™äº›ä¹Ÿä¼šæ‰¹å¤„ç†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setData</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="compiler-ä¼˜åŒ–">Compiler ä¼˜åŒ–</h3>
<p>React 19 åŒ…å«äº†æ–°çš„ç¼–è¯‘å™¨ï¼Œè‡ªåŠ¨ä¼˜åŒ–ç»„ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="c1">// ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¼˜åŒ–è¿™ä¸ªç»„ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">function</span> <span class="nx">ExpensiveComponent</span><span class="p">({</span> <span class="nx">items</span><span class="p">,</span> <span class="nx">filter</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">filteredItems</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> 
</span></span><span class="line"><span class="cl">    <span class="nx">item</span><span class="p">.</span><span class="nx">category</span> <span class="o">===</span> <span class="nx">filter</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">filteredItems</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Item</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="na">item</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">))}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="10-è¿ç§»æŒ‡å—">10. è¿ç§»æŒ‡å—</h2>
<h3 id="ä»-react-18-å‡çº§">ä» React 18 å‡çº§</h3>
<ol>
<li><strong>æ›´æ–°ä¾èµ–</strong>ï¼š</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install react@19 react-dom@19
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li><strong>ä»£ç ç°ä»£åŒ–</strong>ï¼š</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="c1">// æ—§æ–¹å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="p">[</span><span class="nx">data</span><span class="p">,</span> <span class="nx">setData</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">[</span><span class="nx">loading</span><span class="p">,</span> <span class="nx">setLoading</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">[</span><span class="nx">error</span><span class="p">,</span> <span class="nx">setError</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æ–°æ–¹å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="p">[</span><span class="nx">data</span><span class="p">,</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">loading</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useActionState</span><span class="p">(</span><span class="nx">fetchData</span><span class="p">,</span> <span class="kc">null</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li><strong>åˆ©ç”¨æ–°ç‰¹æ€§</strong>ï¼š</li>
</ol>
<ul>
<li>ä½¿ç”¨ Actions æ›¿ä»£å¤æ‚çš„çŠ¶æ€ç®¡ç†</li>
<li>é‡‡ç”¨æœåŠ¡å™¨ç»„ä»¶æå‡æ€§èƒ½</li>
<li>åˆ©ç”¨ use Hook ç®€åŒ–å¼‚æ­¥æ“ä½œ</li>
</ul>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>React 19 çš„è¿™äº›æ–°ç‰¹æ€§å¸¦æ¥äº†ï¼š</p>
<ul>
<li>ğŸš€ <strong>æ›´ç®€å•çš„å¼‚æ­¥å¤„ç†</strong> - Actions å’Œ use Hook</li>
<li>ğŸ“ <strong>æ›´å¥½çš„è¡¨å•ä½“éªŒ</strong> - åŸç”Ÿè¡¨å•é›†æˆå’ŒçŠ¶æ€ç®¡ç†</li>
<li>âš¡ <strong>æ›´ä½³çš„æ€§èƒ½</strong> - æ”¹è¿›çš„ Hydration å’Œç¼–è¯‘å™¨ä¼˜åŒ–</li>
<li>ğŸ”§ <strong>æ›´å¼ºçš„æœåŠ¡å™¨ç«¯èƒ½åŠ›</strong> - å¢å¼ºçš„æœåŠ¡å™¨ç»„ä»¶</li>
</ul>
<p>è¿™äº›æ›´æ–°è®© React åº”ç”¨å¼€å‘å˜å¾—æ›´åŠ ç›´è§‚å’Œé«˜æ•ˆï¼Œä¸ºæ„å»ºç°ä»£ Web åº”ç”¨æä¾›äº†å¼ºå¤§çš„å·¥å…·ã€‚</p>
<hr>
<blockquote>
<p>ğŸ”— <strong>ç›¸å…³é“¾æ¥</strong>: <a href="https://react.dev/blog/2024/04/25/react-19">React 19 å®˜æ–¹æ–‡æ¡£</a> | <a href="https://react.dev/blog/2024/04/25/react-19-upgrade-guide">å‡çº§æŒ‡å—</a></p></blockquote>

            </div>

            <footer class="post-footer">
                
                <ul class="post-tags">
                    
<<<<<<< HEAD
                    <li><a href="http://localhost:1313/%20tags/react">React</a></li>
                    
                    <li><a href="http://localhost:1313/%20tags/react-19">React 19</a></li>
                    
                    <li><a href="http://localhost:1313/%20tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91">å‰ç«¯å¼€å‘</a></li>
=======
                    <li><a href="http://localhost:60062/%20tags/react">React</a></li>
                    
                    <li><a href="http://localhost:60062/%20tags/react-19">React 19</a></li>
                    
                    <li><a href="http://localhost:60062/%20tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91">å‰ç«¯å¼€å‘</a></li>
>>>>>>> 55809d5 (base hugo build coopers blog)
                    
                </ul>

                
                
                <a id="edit-btn"
<<<<<<< HEAD
                   href="https://github.com/wsqyouth/blog/edit/main/content/posts/other/react-19-features.md"
=======
                   href="https://github.com/wsqyouth/coopers_hugo_blog/edit/main/content/posts/other/react-19-features.md"
>>>>>>> 55809d5 (base hugo build coopers blog)
                   target="_blank"
                   rel="noopener noreferrer"
                   style="display: none;">
                    ğŸ“ ç¼–è¾‘æ­¤æ–‡
                </a>
                <script>
                    (function () {
                        
                        const isAdmin = localStorage.getItem('blog-admin');
                        if (isAdmin === 'true') {
                            const btn = document.getElementById('edit-btn');
                            if (btn) {
                                btn.style.display = 'inline-block';
                            }
                        }
                    })();
                </script>
                
            </footer>
        </article>
    </div>
</div>

    </main>
    
<footer class="footer">
    <div class="footer-slogan">å‡¡æ˜¯è¿‡å¾€ï¼Œçš†ä¸ºåºç« </div>
<<<<<<< HEAD
    <span>&copy; 2025 <a href="http://localhost:1313/">Cooper&#39;s Blog</a></span> Â· 
=======
    <span>&copy; 2025 <a href="http://localhost:60062/">Cooper&#39;s Blog</a></span> Â· 
>>>>>>> 55809d5 (base hugo build coopers blog)

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        
        if (codeblock.closest('.pe-code-block-wrap')) {
            return;
        }

        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

<script>
    document.querySelectorAll('pre > code').forEach((codeBlock) => {
        const codeBlockWrap = codeBlock.closest('.pe-code-block-wrap')
        if (!codeBlockWrap) return;

        const copyButton = codeBlockWrap.querySelector('button')
        if (!copyButton) return;

        function copyingDone() {
            copyButton.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="pe-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.0633 5.67375C18.5196 5.98487 18.6374 6.607 18.3262 7.06331L10.8262 18.0633C10.6585 18.3093 10.3898 18.4678 10.0934 18.4956C9.79688 18.5234 9.50345 18.4176 9.29289 18.2071L4.79289 13.7071C4.40237 13.3166 4.40237 12.6834 4.79289 12.2929C5.18342 11.9023 5.81658 11.9023 6.20711 12.2929L9.85368 15.9394L16.6738 5.93664C16.9849 5.48033 17.607 5.36263 18.0633 5.67375Z" fill="currentColor"></path></svg>'
            setTimeout(() => {
                copyButton.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>'
            }, 2000);
        }

        copyButton.addEventListener('click', (cb) => {
            
            cb.stopPropagation();
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeBlock.textContent).then(() => {
                    copyingDone();
                })
                return;
            }
            const range = document.createRange();
            range.selectNodeContents(codeBlock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {
            }
            selection.removeRange(range);
        });
    });

    let peCodeDetails = document.getElementsByClassName('pe-code-details')
    for (let element of peCodeDetails) {
        const peCodeSummary = element.getElementsByClassName('pe-code-details-summary')[0];
        if (peCodeSummary) {
            peCodeSummary.addEventListener('click', () => {
                if (element.classList.contains('open')) {
                    element.classList.remove('open');
                    element.classList.remove('scrollable');
                } else {
                    element.classList.add('open');
                    setTimeout(() => {
                        element.classList.add('scrollable');
                    }, 800);
                }
            }, false);
        }
    }
</script></body>

</html>
